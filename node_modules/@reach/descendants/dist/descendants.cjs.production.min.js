"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,r=require("@reach/utils");function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function a(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n.indexOf(t=a[r])>=0||(o[t]=e[t]);return o}exports.DescendantProvider=function(e){var r=e.context,i=e.children,c=e.items,u=e.set,s=t.useCallback((function(e){var n=e.element,t=a(e,["element"]);n&&u((function(e){var r,a;if(0===e.length)r=o({element:n,index:0},t),a=[].concat(e,[r]);else if(e.find((function(e){return e.element===n})))a=e;else{var i=e.findIndex((function(e){return!(!e.element||!n)&&Boolean(e.element.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING)}));r=o({element:n,index:i},t),a=-1===i?[].concat(e,[r]):[].concat(e.slice(0,i),[r],e.slice(i))}return a.map((function(e,n){return o({},e,{index:n})}))}))}),[]),l=n.useCallback((function(e){e&&u((function(n){return n.filter((function(n){return e!==n.element}))}))}),[]),f=n.useMemo((function(){return{descendants:c,registerDescendant:s,unregisterDescendant:l}}),[c,s,l]);return t.createElement(r.Provider,{value:f},i)},exports.createDescendantContext=function(e,n){return void 0===n&&(n={}),r.createNamedContext(e,o({descendants:[],registerDescendant:r.noop,unregisterDescendant:r.noop},n))},exports.useDescendant=function(e,t){var i=e.context,c=e.element,u=a(e,["context","element"]),s=n.useState()[1],l=n.useContext(i),f=l.registerDescendant,d=l.unregisterDescendant,v=l.descendants;return r.useIsomorphicLayoutEffect((function(){return c||s({}),f(o({element:c},u)),function(){return d(c)}}),[c].concat(Object.values(u))),null!=t?t:v.findIndex((function(e){return e.element===c}))},exports.useDescendantKeyDown=function(e,t){var r=n.useContext(e).descendants,o=t.callback,a=t.currentIndex,i=t.filter,c=t.key,u=void 0===c?"index":c,s=t.orientation,l=void 0===s?"vertical":s,f=t.rotate,d=void 0===f||f,v=t.rtl,p=void 0!==v&&v,D=null!=a?a:-1;return function(e){if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(e.key)){var n=i?r.filter(i):r;if(i&&(D=n.findIndex((function(e){return e.index===a}))),n.length)switch(e.key){case"ArrowDown":if("vertical"===l||"both"===l){e.preventDefault();var t=m();o("option"===u?t:t[u])}break;case"ArrowUp":if("vertical"===l||"both"===l){e.preventDefault();var c=b();o("option"===u?c:c[u])}break;case"ArrowLeft":if("horizontal"===l||"both"===l){e.preventDefault();var s=(p?m:b)();o("option"===u?s:s[u])}break;case"ArrowRight":if("horizontal"===l||"both"===l){e.preventDefault();var f=(p?b:m)();o("option"===u?f:f[u])}break;case"PageUp":e.preventDefault();var v=(e.ctrlKey?b:w)();o("option"===u?v:v[u]);break;case"Home":e.preventDefault();var h=w();o("option"===u?h:h[u]);break;case"PageDown":e.preventDefault();var x=(e.ctrlKey?m:k)();o("option"===u?x:x[u]);break;case"End":e.preventDefault();var g=k();o("option"===u?g:g[u])}}function m(){return D===n.length-1?d?w():n[D]:n[(D+1)%n.length]}function b(){return 0===D?d?k():n[D]:n[(D-1+n.length)%n.length]}function w(){return n[0]}function k(){return n[n.length-1]}}},exports.useDescendants=function(){return n.useState([])};
//# sourceMappingURL=descendants.cjs.production.min.js.map
